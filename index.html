<!DOCTYPE html><html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5</title>
  <style>
    body {
      background: #111;
      color: #eee;
      font-family: sans-serif;
      padding: 20px;
    }
    textarea {
      width: 100%;
      height: 100px;
      background: #222;
      color: #eee;
      border: 1px solid #444;
      padding: 10px;
      resize: vertical;
    }
    button {
      margin: 5px 5px 5px 0;
      padding: 10px;
      border: none;
      border-radius: 5px;
      background: #444;
      color: #eee;
      cursor: pointer;
    }
    button:hover {
      background: #666;
    }
    #error {
      color: red;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>5</h1>
  <textarea id="inputText" placeholder="লিখুন..."></textarea>
  <br />
  <button id="ncode">Ncode</button>
  <button id="dcode">Dcode</button>
  <button id="clear">Clear</button>
  <br />
  <textarea id="outputText" placeholder="ফলাফল..."></textarea>
  <br />
  <button id="copyB" title="ফলাফল কপি করুন">B</button>
  <div id="error"></div>
  <script>
    const map = {
      'অ': '00001', 'আ': '00002', 'ই': '00003', 'ঈ': '00004', 'উ': '00005',
      'ঊ': '00006', 'ঋ': '00007', 'এ': '00008', 'ঐ': '00009', 'ও': '00010',
      'ঔ': '00011', 'ক': '00012', 'খ': '00013', 'গ': '00014', 'ঘ': '00015',
      'ঙ': '00016', 'চ': '00017', 'ছ': '00018', 'জ': '00019', 'ঝ': '00020',
      'ঞ': '00021', 'ট': '00022', 'ঠ': '00023', 'ড': '00024', 'ঢ': '00025',
      'ণ': '00026', 'ত': '00027', 'থ': '00028', 'দ': '00029', 'ধ': '00030',
      'ন': '00031', 'প': '00032', 'ফ': '00033', 'ব': '00034', 'ভ': '00035',
      'ম': '00036', 'য': '00037', 'র': '00038', 'ল': '00039', 'শ': '00040',
      'ষ': '00041', 'স': '00042', 'হ': '00043', 'ড়': '00044', 'ঢ়': '00045',
      'য়': '00046', 'ৎ': '00047', 'ং': '00048', 'ঃ': '00049', 'ঁ': '00050'
    };const reverseMap = Object.fromEntries(Object.entries(map).map(([k, v]) => [v, k]));

function sanitizeInput(str) {
  return str.replace(/[\u200C\u200D]/g, '').replace(/[\s\n\r\t]+/g, '');
}

function encode(text) {
  return [...sanitizeInput(text)].map(char => map[char] || '00000').join('');
}

function decode(code) {
  const result = [];
  const errors = [];
  if (code.length % 5 !== 0) {
    errors.push('দৈর্ঘ্য ৫-এর গুণিতক নয়');
  }
  for (let i = 0; i < code.length; i += 5) {
    const chunk = code.substr(i, 5);
    result.push(reverseMap[chunk] || '�');
  }
  return [result.join(''), errors];
}

const inputText = document.getElementById('inputText');
const outputText = document.getElementById('outputText');
const copyB = document.getElementById('copyB');
const errorBox = document.getElementById('error');

document.getElementById('ncode').addEventListener('click', () => {
  const input = inputText.value;
  const output = encode(input);
  outputText.value = output;
  errorBox.textContent = '';
});

document.getElementById('dcode').addEventListener('click', () => {
  const [output, errors] = decode(inputText.value);
  outputText.value = output;
  errorBox.textContent = errors.join(', ');
});

document.getElementById('clear').addEventListener('click', () => {
  inputText.value = '';
  outputText.value = '';
  errorBox.textContent = '';
  inputText.focus();
});

copyB.addEventListener('click', () => {
  if (outputText.value.trim() === '') {
    errorBox.textContent = 'কিছু নেই কপি করার মতো';
    return;
  }
  navigator.clipboard.writeText(outputText.value);
  flashButton(copyB, 'Copied!');
});

function flashButton(button, message) {
  const original = button.textContent;
  button.textContent = message;
  setTimeout(() => {
    button.textContent = original;
  }, 1000);
}

  </script>
</body>
</html>
